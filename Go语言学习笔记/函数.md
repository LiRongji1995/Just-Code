
# Goè¯­è¨€å­¦ä¹ ç¬”è®° - ç¬¬ä¸‰ç«  å‡½æ•°

## ğŸ“˜ 3.1 å‡½æ•°å®šä¹‰

```go
func add(a int, b int) int {
    return a + b
}
```

- å‚æ•°å¯å‘½åæˆ–åŒ¿åï¼›
- å¯ä½¿ç”¨ç®€å†™ï¼š`a, b int`ï¼›
- å‡½æ•°è¿”å›å€¼å¯ä»¥æ˜¯å•ä¸ªã€å¤šä¸ªï¼Œæˆ–å‘½åè¿”å›å€¼ã€‚

---

## ğŸ“˜ 3.2 å˜å‚å‡½æ•°ï¼ˆå¯å˜å‚æ•°ï¼‰

```go
func sum(nums ...int) int {
    total := 0
    for _, n := range nums {
        total += n
    }
    return total
}
```

- åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°ä¸”ä½äºæœ€åï¼›
- å¯ä¼ ä»»æ„ä¸ªå‚æ•°æˆ–åˆ‡ç‰‡ `sum([]int{1,2,3}...)`ã€‚

---

## ğŸ“˜ 3.3 è¿”å›å€¼å½¢å¼

### å•è¿”å›å€¼ï¼š
```go
func square(x int) int {
    return x * x
}
```

### å¤šè¿”å›å€¼ï¼š
```go
func divmod(a, b int) (int, int) {
    return a / b, a % b
}
```

### å‘½åè¿”å›å€¼ï¼š
```go
func named() (a, b int) {
    a = 3
    b = 4
    return
}
```

---

## ğŸ“˜ 3.4 åŒ¿åå‡½æ•°ä¸é—­åŒ…

### åŒ¿åå‡½æ•°ï¼š
```go
f := func(x, y int) int {
    return x + y
}
```

### é—­åŒ…ï¼š
```go
func adder() func(int) int {
    sum := 0
    return func(x int) int {
        sum += x
        return sum
    }
}
```

---

## ğŸ“˜ 3.5 å»¶è¿Ÿæ‰§è¡Œ defer

```go
func main() {
    defer fmt.Println("world")
    fmt.Println("hello")
}
```

- åè¿›å…ˆå‡ºæ‰§è¡Œï¼›
- ç”¨äºæ–‡ä»¶å…³é—­ã€è§£é”ã€æ—¥å¿—ç­‰åœºæ™¯ã€‚

---

## ğŸ“˜ 3.6 é”™è¯¯å¤„ç†æœºåˆ¶ï¼ˆerror / panic / recoverï¼‰

### error æ¥å£
```go
import "errors"
func doSomething() error {
    return errors.New("å‡ºé”™äº†")
}
```

### å¤šè¿”å›å€¼æºå¸¦é”™è¯¯
```go
func openFile(name string) (*os.File, error) {
    f, err := os.Open(name)
    if err != nil {
        return nil, err
    }
    return f, nil
}
```

### panic è§¦å‘ä¸¥é‡é”™è¯¯
```go
func testPanic() {
    panic("ä¸¥é‡é”™è¯¯")
}
```

### recover æ•è· panic
```go
func safeRun() {
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("æ•è·åˆ° panic:", r)
        }
    }()
    panic("boom!")
}
```

---

## ğŸ“Š é”™è¯¯æœºåˆ¶å¯¹æ¯”è¡¨

| åœºæ™¯ | æ¨èæœºåˆ¶ | ç†ç”± |
|------|-----------|------|
| å¯é¢„æœŸé”™è¯¯ | `error` | å¯é€šè¿‡ return å¤„ç† |
| ä¸¥é‡å¼‚å¸¸ | `panic` | ä¸­æ–­å½“å‰æ§åˆ¶æµ |
| å®¹é”™æ¢å¤ | `recover` | åœ¨ defer ä¸­æ•è· panic |

---

## âœ… æœ¬ç« å°ç»“è¡¨

| ç‰¹æ€§ | æ”¯æŒæƒ…å†µ | è¯´æ˜ |
|------|----------|------|
| å‡½æ•°åµŒå¥— | âœ… | æ”¯æŒåŒ¿åå‡½æ•° |
| é—­åŒ… | âœ… | æ•è·å±€éƒ¨å˜é‡ |
| å¤šè¿”å›å€¼ | âœ… | é”™è¯¯å¤„ç†æƒ¯ç”¨æ–¹å¼ |
| å¯å˜å‚æ•° | âœ… | `...T` å½¢å¼ |
| å‘½åè¿”å› | âœ… | å¢å¼ºå¯è¯»æ€§ |
| defer | âœ… | èµ„æºé‡Šæ”¾ä¸é”™è¯¯æ•è· |
| error/panic/recover | âœ… | é”™è¯¯å¤„ç†ä¸‰éƒ¨æ›² |

